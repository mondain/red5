<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Appendix&nbsp;D.&nbsp;H264</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.74.0"><link rel="home" href="index.html" title="Red5 - Reference Documentation"><link rel="up" href="index.html" title="Red5 - Reference Documentation"><link rel="prev" href="FLV.html" title="Appendix&nbsp;C.&nbsp;FLV"><link rel="next" href="Red5Changelog.html" title="Appendix&nbsp;E.&nbsp;Red5 Changelog"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://osflash.org/red5" title="Red5 Open Source Flash Server"><img style="border:none;" src="images/red5-banner.png"></img></a><a style="border:none;" href="http://osflash.org/red5" title="Red5 Open Source Flash Server"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="images/red5-banner-logo.png"></img></a></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="H264"></a>Appendix&nbsp;D.&nbsp;H264</h2></div></div></div><p>This Section contains some of the answers from the mailing list about h.264.
		Please read this first before sending another question to the mailing list.</p><p>Paul Gregoire Posted initial Support in his Blog 6. October 2008 18:34:
		Steven and I got h264 working !

		<a class="link" href="http://gregoire.org/2008/10/06/red5-h264/" target="_top">http://gregoire.org/2008/10/06/red5-h264/</a>
	</p><p>Questions:</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264DoesRed5plantosupportH.264ACCstreamsinthenextreleasemaybe0.7.1"></a>D.1.&nbsp;Does Red5 plan to support H.264/ACC streams in the next release, maybe 0.7.1?</h2></div></div></div><p>You can check out Paul's mp4/f4v branch here:

			<a class="link" href="http://red5.googlecode.com/svn/java/server/branches/paulg_mp4/" target="_top">http://red5.googlecode.com/svn/java/server/branches/paulg_mp4/</a>
		</p><p>and according to the plan it should be part of the 0.7.1 release - afaik.</p><p>And I'll let Paul speak for himself :-)

			<a class="link" href="http://osflash.org/pipermail/red5_osflash.org/2008-January/018483.html" target="_top">http://osflash.org/pipermail/red5_osflash.org/2008-January/018483.html</a>
		</p><p>Paul:I feel like I'm done it myself a million times :-)
			I'm currently active in the mp4 / h.264 branch and I would love to have it be part of the 0.7.1 release. The problem for me is that I'm not sure when I will be done and I would like to 0.7.1 go live very soon; it is more likely that 0.7.2 will include the release of h.264.</p><p>In actuality it is now scheduled for the 0.9.0 release but it may make it into 0.8.0. The 0.7.1 version will not be released - Paul</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264whyare.mp4filesalsolistedinoflaDemowebappgridaspossiblestreams"></a>D.2.&nbsp;why are .mp4 files also listed in oflaDemo webapp grid as possible streams?</h2></div></div></div><p>The "correct" extension in Adobe's case is F4V for Mpeg4 / h.264 encoded content. If you want a video that works, use the sample that comes with FMS3: AdobeBand_1500K_H264.mp4
			Like I stated in my email/post, I have clean-up to do in addition to making the video config packet dynamic (the one that contains the decoder settings).</p><p>If you specify the flv extension that is what you will get, it will not include h264 content. FLV is expected to be any of the following video codecs: vp6, screenvideo, or h263. The audio will also not support AAC / MP4A for the flv extension. The f4v, mp4, and mov extensions will be provided by the MP4Reader class. The f4v file may contain avc1, vp6e, h264, mp4 for video and aac, mp4a, mp3, pcm for audio (there may be more but thats what I recall). Along side the MP4Reader is an audio only reader for AAC/MP4A files in the same style as the MP3Reader; it will be released at the same time and is for audio only files.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264howtoconverttoh.264usingffmpeg"></a>D.3.&nbsp;howto convert to h.264 using ffmpeg?</h2></div></div></div><p>Here is a ffmpeg encoding line to provide mp4 with h264 codec readable with flash player 9 , FLVTOOL useless.</p><div class="literallayout"><p><br>
options="-vcodec&nbsp;libx264&nbsp;-b&nbsp;512k&nbsp;-bf&nbsp;3&nbsp;-subq&nbsp;6&nbsp;-cmp&nbsp;256&nbsp;-refs&nbsp;5&nbsp;-qmin&nbsp;10&nbsp;\<br>
&nbsp;-qmax&nbsp;51&nbsp;-qdiff&nbsp;4&nbsp;-coder&nbsp;1&nbsp;-loop&nbsp;1&nbsp;-me&nbsp;hex&nbsp;-me_range&nbsp;16&nbsp;-trellis&nbsp;1&nbsp;\<br>
&nbsp;-flags&nbsp;+mv4&nbsp;-flags2&nbsp;+bpyramid+wpred+mixed_refs+brdo+8x8dct&nbsp;\<br>
&nbsp;-partitions&nbsp;parti4x4+parti8x8+partp4x4+partp8x8+partb8x8&nbsp;-g&nbsp;250&nbsp;\<br>
&nbsp;-keyint_min&nbsp;25&nbsp;-sc_threshold&nbsp;40&nbsp;-i_qfactor&nbsp;0.71"<br>
<br>
&nbsp;ffmpeg&nbsp;-y&nbsp;-i&nbsp;"$X"&nbsp;-an&nbsp;-pass&nbsp;1&nbsp;-threads&nbsp;2&nbsp;$options&nbsp;"$tmpfile"<br>
<br>
&nbsp;ffmpeg&nbsp;-y&nbsp;-i&nbsp;"$X"&nbsp;-acodec&nbsp;libfaac&nbsp;-ar&nbsp;44100&nbsp;-ab&nbsp;96k&nbsp;-pass&nbsp;2&nbsp;\<br>
&nbsp;-threads&nbsp;2&nbsp;$options&nbsp;"$tmpfile"<br>
<br>
&nbsp;qt-faststart&nbsp;"$tmpfile"&nbsp;"$outfile"<br>
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264Doesanyonehavealinktoanexplainationofh264licensing"></a>D.4.&nbsp;Does anyone have a link to an explaination of h264 licensing?</h2></div></div></div><p>
			<a class="link" href="http://www.mpegla.com/avc/avc-licensees.cfm" target="_top">http://www.mpegla.com/avc/avc-licensees.cfm</a>
		</p><p>
			<a class="link" href="http://www.flashmediaserver-blog.de/2008/05/21/54/" target="_top">http://www.flashmediaserver-blog.de/2008/05/21/54/</a> (skip the german text of the top) the list (in short ) from their:
		</p><p>H264 /commercial
			if a Enduser chooses to pay title-by-title
			 o no fee for videos shorter then 12 minutes
			 o else the lower of: 0,02 US$ per Titel or 2% of the Price that the Enduser pays
			if the Enduser pays within Subscription contract:
			 o &lt; 100.000 Subscribers per year --&gt; no Fee
			 o 100.000 - 250.000 Subscribers per Y --&gt; 25.000 US$/Yr
			 o 250.000 - 500.000 Subscribers per Y --&gt; 50.000 US$/Y
			 o etc.</p><p>this might be interesting for germans (we as only folk on the world have a fee for free televeision called GEZ):</p><div class="blockquote"><blockquote class="blockquote"><p>    dann gibt es noch ein weiteres Lizenzmodell, dass aber nur g?ltig ist, wenn Geb?hren des Endusers an anderer Stelle bereits bezahlt werden, wie z.B. bei den GEZ-Geb?hren.(ist aber nur f?r ?ffentlich  rechtliche interessant):-)
				   (there a differenet licensing model aswell but only available if the Enduser pays there Fee?s some where else like in german GEZ)</p></blockquote></div><p>for me the stream.seek functionality doesent work for .mp4 files did someone tested yet?
			Yes, seek is one of the things that doesn't work yet.</p><p>Will I be able to multiplex H.264 video and AAC audio into the current FLV container format?</p><p>A: Adobe encourages customers to use the new MPEG-4-based file format. The new file format is designed to work with the features of these codecs.</p><p>from:

			<a class="link" href="http://labs.adobe.com/wiki/index.php/Flash_Player:9:Update:H.264#Q:_Will_I_be_able_to_multiplex_H.264_video_and_AAC_audio_into_the_current_FLV_container_format.3F" target="_top">http://labs.adobe.com/wiki/index.php/Flash_Player:9:Update:H.264#Q:_Will_I_be_able_to_multiplex_H.264_video_and_AAC_audio_into_the_current_FLV_container_format.3F</a>
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264Someonealreadycreatedademo"></a>D.5.&nbsp;Someone already created a demo?</h2></div></div></div><p>
			<a class="link" href="http://s1blue2.waltertak.com:15080/demos/" target="_top">http://s1blue2.waltertak.com:15080/demos/</a>
		</p><p>This demo is a simple AS3 Flash client playing a selection of FLV and H.264 content. The FLV content is to show the huge difference in quality.</p><p>Some H.264 content isn't played correct ; the playhead runs too fast resulting in fast-forwarding.</p><p>The large "720" and "1080" content requires upto 2 megabytes per second of bandwidth to be played smoothly.</p><p>Seeking through H.264 doesn't work yet (as of 2008/10/08) .</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264SomemoreInfoaboutSeekandpossiblesolutions"></a>D.6.&nbsp;Some more Info about Seek and possible solutions</h2></div></div></div><p>
			<a class="link" href="http://h264.code-shop.com/trac/wiki/FlashPlayer" target="_top">http://h264.code-shop.com/trac/wiki/FlashPlayer</a>
		</p><p>Seek isn't working yet with H.264 content&amp;nbsp; (as of 2008/10/08) .</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264Areaudiofilessupported"></a>D.7.&nbsp;Are audio files supported?</h2></div></div></div><p>Yes, the following file types may be played:</p><div class="itemizedlist"><ul type="disc"><li><p>AAC</p></li><li><p>M4A</p></li><li><p>F4A</p></li></ul></div><p>They are delivered in the same manner as an MP3 file, but with a different reader.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264HowdoIrequestanh264file"></a>D.8.&nbsp;How do I request an h264 file?</h2></div></div></div><p>These request methods are supported:</p><div class="itemizedlist"><ul type="disc"><li><p>mp4:myfile</p></li><li><p>mp4:myfile.f4v</p></li><li><p>mp4:myfile.mp4</p></li><li><p>mp4:myfile.mov</p></li><li><p>mp4:myfile.3gp</p></li><li><p>mp4:myfile.3g2</p></li><li><p>myfile.f4v</p></li><li><p>myfile.mp4</p></li><li><p>myfile.mov</p></li><li><p>myfile.3gp</p></li><li><p>myfile.3g2</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264Doesred5supporth264livestreaming"></a>D.9.&nbsp;Does red5 support h264 live streaming?</h2></div></div></div><p>h.264 currently concerns only VOD.
			Paul: Right now, RTP/RTSP is not supported. When the MP4/h.264 features are complete, you will get RTP/RTSP for Free!</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="H264Links"></a>D.10.&nbsp;Links</h2></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
					<a class="link" href="http://today.java.net/pub/a/today/2006/08/22/experiments-in-streaming-java-me.html" target="_top">http://today.java.net/pub/a/today/2006/08/22/experiments-in-streaming-java-me.html</a>
				</p></li><li><p>
					<a class="link" href="http://rtspproxy.berlios.de/" target="_top">http://rtspproxy.berlios.de/</a>
				</p></li></ul></div></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="FLV.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="Red5Changelog.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Appendix&nbsp;C.&nbsp;FLV&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://osflash.org/red5" title="Red5">Red5 Open Source Flash Server</a></span></td><td width="40%" align="right" valign="top">&nbsp;Appendix&nbsp;E.&nbsp;Red5 Changelog</td></tr></table></div></body></html>