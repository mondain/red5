<?xml version="1.0" encoding="UTF-8"?>
<con:tc-config xmlns:con="http://www.terracotta.org/config">
  <servers>
    <server name="localhost">
      <dso-port>9510</dso-port>
      <jmx-port>9520</jmx-port>
      <data>terracotta/server-data</data>
      <logs>terracotta/server-logs</logs>
    </server>
  </servers>
  <clients>
    <logs>terracotta/client-logs</logs>
  </clients>
  <application>
    <dso>
      <instrumented-classes>
        <include>
          <class-expression>org.red5.server.GlobalScope</class-expression>
          <honor-transient>true</honor-transient>
        </include>
        <include>
          <class-expression>org.red5.server.Scope</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.BasicScope</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.PersistableAttributeStore</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.AttributeStore</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.ClientRegistry</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.Client</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.CoreHandler</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.WebScope</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.Server</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.net.rtmp.RTMPMinaConnection</class-expression>
          <honor-transient>true</honor-transient>
        </include>
        <include>
          <class-expression>org.red5.server.net.rtmp.Channel</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.BaseConnection</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.net.rtmp.RTMPConnection</class-expression>
          <honor-transient>true</honor-transient>
        </include>
        <include>
          <class-expression>org.red5.server.stream.ClientBroadcastStream</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.stream.AbstractClientStream</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.stream.AbstractStream</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.stream.PlaylistSubscriberStream</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.stream.PlaylistSubscriberStream$PlayEngine</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.messaging.InMemoryPullPullPipe</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.messaging.AbstractPipe</class-expression>
          <honor-transient>true</honor-transient>
          <on-load>
            <execute>self.listeners = new ArrayList();</execute>
          </on-load>
        </include>
        <include>
          <class-expression>org.red5.server.messaging.InMemoryPushPushPipe</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.Context</class-expression>
        </include>
      </instrumented-classes>
      <transient-fields>
        <field-name>org.red5.server.Scope.serviceHandlers</field-name>
        <field-name>org.red5.server.net.rtmp.RTMPMinaConnection.ioSession</field-name>
        <field-name>org.red5.server.net.rtmp.RTMPConnection.bwContext</field-name>
        <field-name>org.red5.server.messaging.AbstractPipe.listeners</field-name>
        <field-name>org.red5.server.Server.applicationContext</field-name>
        <field-name>org.red5.server.Context.applicationContext</field-name>
      </transient-fields>
      <distributed-methods>
        <method-expression>void org.red5.server.messaging.AbstractPipe.firePipeConnectionEvent(org.red5.server.messaging.PipeConnectionEvent)</method-expression>
        <method-expression>void org.red5.server.stream.PlaylistSubscriberStream$PlayEngine.pushMessage(org.red5.server.messaging.IPipe, org.red5.server.messaging.IMessage)</method-expression>
      </distributed-methods>
    </dso>
    <spring>
      <jee-application name="*">
        <application-contexts>
          <application-context>
            <paths>
              <path>*/red5-default.xml</path>
            </paths>
            <beans>
              <bean name="global.scope"/>
              <bean name="global.context"/>
              <bean name="global.handler"/>
              <bean name="global.clientRegistry"/>
              <bean name="global.serviceInvoker"/>
              <bean name="global.mappingStrategy"/>
              <bean name="red5.scopeResolver"/>
            </beans>
          </application-context>
          <application-context>
            <paths>
              <path>*/red5-common.xml</path>
            </paths>
            <beans>
              <bean name="red5.server"/>
            </beans>
          </application-context>
          <application-context>
            <paths>
              <path>*/red5-web.xml</path>
            </paths>
            <beans>
              <bean name="web.scope"/>
              <bean name="web.handler"/>
              <bean name="web.context"/>
            </beans>
          </application-context>
        </application-contexts>
      </jee-application>
    </spring>
  </application>
  <system>
    <configuration-model>development</configuration-model>
  </system>
</con:tc-config>