<con:tc-config xmlns:con="http://www.terracotta.org/config">
  <servers>
    <server name="localhost">
      <dso-port>9510</dso-port>
      <jmx-port>9520</jmx-port>
      <data>terracotta/server-data</data>
      <logs>terracotta/server-logs</logs>
    </server>
  </servers>
  <clients>
    <logs>terracotta/client-logs</logs>
  </clients>
  <application>
    <dso>
      <instrumented-classes>
        <include>
          <class-expression>org.red5..*</class-expression>
          <honor-transient>true</honor-transient>
        </include>
      </instrumented-classes>
      <transient-fields>
        <field-name>org.red5.server.Scope.serviceHandlers</field-name>
        <field-name>org.red5.server.net.rtmp.RTMPMinaConnection.ioSession</field-name>
        <field-name>org.red5.server.net.rtmp.RTMPConnection.bwContext</field-name>
        <field-name>org.red5.server.messaging.AbstractPipe.listeners</field-name>
        <field-name>org.red5.server.WebScope.servletContext</field-name>
      </transient-fields>
      <locks>
        <named-lock>
          <method-expression>int org.red5.server.Scope.*etDepth(..)</method-expression>
          <lock-name>ScopeDepth</lock-name>
          <lock-level>write</lock-level>
        </named-lock>
        <named-lock>
          <method-expression>* org.red5.server.webapp.oflaDemo.Application.app*(..)</method-expression>
          <lock-name>oflaDemo</lock-name>
          <lock-level>write</lock-level>
        </named-lock>
      </locks>
    </dso>
    <spring>
      <jee-application name="*">
        <application-contexts>
          <application-context>
            <paths>
              <path>*/red5-default.xml</path>
            </paths>
            <beans>
              <bean name="global.scope"/>
              <bean name="global.context">
                <non-distributed-field>applicationContext</non-distributed-field>
                <non-distributed-field>coreContext</non-distributed-field>
              </bean>
              <bean name="global.handler"/>
              <bean name="global.clientRegistry"/>
              <bean name="global.serviceInvoker"/>
              <bean name="global.mappingStrategy"/>
              <bean name="red5.scopeResolver"/>
              <bean name="red5.server">
                <non-distributed-field>applicationContext</non-distributed-field>
              </bean>
            </beans>
          </application-context>
          <!--<application-context>
            <paths>
              <path>*/red5-web.xml</path>
            </paths>
            <beans>
              <bean name="web.handler"/>
              <bean name="web.context">
              	<non-distributed-field>applicationContext</non-distributed-field>
              	<non-distributed-field>coreContext</non-distributed-field>
              </bean>
            </beans>
          </application-context>-->
        </application-contexts>
      </jee-application>
    </spring>
  </application>
  <system>
    <configuration-model>development</configuration-model>
  </system>
</con:tc-config>