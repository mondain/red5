<con:tc-config xmlns:con="http://www.terracotta.org/config">
  <servers>
    <server host="localhost" name="localhost">
      <dso-port>9510</dso-port>
      <jmx-port>9520</jmx-port>
      <data>terracotta/server-data</data>
      <logs>terracotta/server-logs</logs>
    </server>
  </servers>
  <clients>
    <logs>terracotta/client-logs</logs>
  </clients>
  <application>
    <dso>
      <instrumented-classes>
        <include>
          <class-expression>org.red5.server.GlobalScope</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.api.IScope+</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.WebScope</class-expression>
          <on-load>
            <execute>self.internalInit()</execute>
          </on-load>
        </include>
        <include>
          <class-expression>org.red5.server.BasicScope</class-expression>
          <on-load>
            <execute>self.internalInit()</execute>
          </on-load>
        </include>
        <include>
          <class-expression>org.red5.server.PersistableAttributeStore</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.AttributeStore</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.so.SharedObjectService</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.adapter..*</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.persistence.RamPersistence</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.so.SharedObject</class-expression>
          <on-load>
            <execute>self.internalInit()</execute>
          </on-load>
        </include>
        <include>
          <class-expression>org.red5.server.so.SharedObjectScope</class-expression>
          <on-load>
            <execute>self.internalInit()</execute>
          </on-load>
        </include>
        <include>
          <class-expression>org.red5.server.net.rtmp.event.BaseEvent</class-expression>
        </include>
        <include>
          <class-expression>org.red5.io.utils.ObjectMap</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.stream.StreamService</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.Scope</class-expression>
          <on-load>
            <execute>self.internalInit()</execute>
          </on-load>
        </include>
        <include>
          <class-expression>org.red5.server.so.SharedObjectEvent</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.so.SharedObjectMessage</class-expression>
        </include>
        <include>
          <class-expression>org.red5.server.so.ISharedObject+</class-expression>
        </include>
      </instrumented-classes>
      <roots>
        <root>
          <field-name>org.red5.server.GlobalScope.myChildren</field-name>
        </root>
      </roots>
      <locks>
        <autolock>
          <method-expression>boolean org.red5.server.GlobalScope.addChildScope(org.red5.server.api.IBasicScope)</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock auto-synchronized="true">
          <method-expression>int org.red5.server.Scope.getDepth()</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock auto-synchronized="true">
          <method-expression>boolean org.red5.server.Scope.hasParent()</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>void org.red5.server.Scope.init()</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>boolean org.red5.server.Scope.addChildScope(org.red5.server.api.IBasicScope)</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <named-lock>
          <method-expression>void org.red5.server.Scope.init()</method-expression>
          <lock-level>write</lock-level>
          <lock-name>scope_init</lock-name>
        </named-lock>
        <named-lock>
          <method-expression>void org.red5.server.WebScope.register()</method-expression>
          <lock-level>write</lock-level>
          <lock-name>webscope_register</lock-name>
        </named-lock>
        <named-lock>
          <method-expression>boolean org.red5.server.AttributeStore.setAttribute(java.lang.String, java.lang.Object)</method-expression>
          <lock-level>write</lock-level>
          <lock-name>attribute_store_setAttribute</lock-name>
        </named-lock>
        <autolock auto-synchronized="true">
          <method-expression>void org.red5.server.so.SharedObject.*(..)</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>java.util.Iterator org.red5.server.GlobalScope.iterator()</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>void org.red5.server.GlobalScope.removeChildScope(org.red5.server.api.IBasicScope)</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>boolean org.red5.server.GlobalScope.hasChildScope(java.lang.String)</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>boolean org.red5.server.GlobalScope.hasChildScope(java.lang.String, java.lang.String)</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>java.util.Iterator org.red5.server.GlobalScope.getScopeNames()</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>org.red5.server.api.IScope org.red5.server.GlobalScope.getScope(java.lang.String)</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>java.util.Iterator org.red5.server.GlobalScope.getBasicScopeNames(java.lang.String)</method-expression>
          <lock-level>write</lock-level>
        </autolock>
        <autolock>
          <method-expression>org.red5.server.api.IBasicScope org.red5.server.GlobalScope.getBasicScope(java.lang.String, java.lang.String)</method-expression>
          <lock-level>write</lock-level>
        </autolock>
      </locks>
      <transient-fields>
        <field-name>org.red5.server.WebScope.servletContext</field-name>
        <field-name>org.red5.server.WebScope.server</field-name>
        <field-name>org.red5.server.WebScope.global</field-name>
        <field-name>org.red5.server.Scope.handler</field-name>
        <field-name>org.red5.server.Scope.subscopeStats</field-name>
        <field-name>org.red5.server.Scope.clientStats</field-name>
        <field-name>org.red5.server.Scope.connectionStats</field-name>
        <field-name>org.red5.server.Scope.context</field-name>
        <field-name>org.red5.server.GlobalScope.server</field-name>
        <field-name>org.red5.server.Scope.serviceHandlers</field-name>
        <field-name>org.red5.server.Scope.clients</field-name>
        <field-name>org.red5.server.BasicScope.listeners</field-name>
        <field-name>org.red5.server.PersistableAttributeStore.store</field-name>
        <field-name>org.red5.server.so.SharedObjectService.log</field-name>
        <field-name>org.red5.server.so.SharedObject.listenerStats</field-name>
        <field-name>org.red5.server.so.SharedObject.changeStats</field-name>
        <field-name>org.red5.server.so.SharedObject.deleteStats</field-name>
        <field-name>org.red5.server.so.SharedObject.listeners</field-name>
        <field-name>org.red5.server.so.SharedObject.sendStats</field-name>
        <field-name>org.red5.server.so.SharedObject.source</field-name>
        <field-name>org.red5.server.so.SharedObject.log</field-name>
        <field-name>org.red5.server.so.SharedObjectScope.log</field-name>
        <field-name>org.red5.server.so.SharedObjectScope.serverListeners</field-name>
        <field-name>org.red5.server.so.SharedObjectScope.handlers</field-name>
        <field-name>org.red5.server.so.SharedObjectScope.securityHandlers</field-name>
      </transient-fields>
      <distributed-methods>
        <method-expression>void org.red5.server.so.SharedObject.sendSyncEvents(java.util.LinkedList)</method-expression>
      </distributed-methods>
    </dso>
  </application>
</con:tc-config>